"use strict";(self.webpackChunkmyWork=self.webpackChunkmyWork||[]).push([[904],{904:(R,w,s)=>{s.r(w),s.d(w,{ProductsPageMoreModule:()=>d});var c=s(6895),S=s(5632),y=s(3551),l=s(433),e=s(1571),T=s(529),M=s(2340),x=s(6858);class i{getProductsPage(){return this.products.slice(10*(this.page-1),10*this.page)}getProducts$(t){const o=new T.LE({fromObject:t});return this.httpService.getHttp(this.url,o)}sortProducts(t){this.products=this.products.sort((o,r)=>o[t]<r[t]?-1:1)}roundPrice(t){const o=[];for(const r of t){let n=0;r.price&&(n=Math.round(r.price)),r.price=n,o.push(r)}return o}constructor(t){this.httpService=t,this.products=[],this.url=`${M.N.HTTP_Advanced}/products`,this.countProduct=10,this.page=1,this.pages=1,this.totalItems=1,this.canApp=!0,this.orderBy="",this.options=[{name:"id",value:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"},{name:"company",value:"\u041a\u043e\u043c\u043f\u043d\u0438\u044f"},{name:"title",value:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},{name:"category",value:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"},{name:"price",value:"\u0426\u0435\u043d\u0430"},{name:"rating",value:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"}]}}i.\u0275fac=function(t){return new(t||i)(e.LFG(x.O))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"});var Z=s(1354);class u{constructor(){this.contenteditable=!1,this.value="Cell",this.cellValue=new e.vpe}getValue(t){this.cellValue.emit(t)}}u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-data-table-cell"]],inputs:{contenteditable:"contenteditable",value:"value"},outputs:{cellValue:"cellValue"},decls:3,vars:2,consts:[[1,"cell",3,"blur"],["cellV",""]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",0,1),e.NdJ("blur",function(){e.CHM(r);const C=e.MAs(1);return e.KtG(o.getValue(C.textContent))}),e._uU(2),e.qZA()}2&t&&(e.uIk("contenteditable",o.contenteditable),e.xp6(2),e.hij(" ",o.value," "))},styles:[".cell[_ngcontent-%COMP%]{position:absolute}"]});class g{}g.\u0275fac=function(t){return new(t||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-data-table-header"]],decls:10,vars:0,consts:[[1,"row-header"],[1,"cells"],["value","id",1,"cell"],["value","\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",1,"cell"],["value","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",1,"cell"],["value","\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",1,"cell"],["value","\u0420\u0435\u0439\u0442\u0438\u043d\u0433",1,"cell"],["value","\u0426\u0435\u043d\u0430",1,"cell"],["value","Image",1,"cell"],[1,"header__menu"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-data-table-cell",2)(3,"app-data-table-cell",3)(4,"app-data-table-cell",4)(5,"app-data-table-cell",5)(6,"app-data-table-cell",6)(7,"app-data-table-cell",7)(8,"app-data-table-cell",8),e.qZA(),e._UZ(9,"div",9),e.qZA())},dependencies:[u],styles:[".row-header[_ngcontent-%COMP%]{display:flex;width:100%}.cells[_ngcontent-%COMP%]{display:flex;width:calc(100% - 30px)}.cell[_ngcontent-%COMP%]{position:relative;padding-left:10px;padding-right:10px;width:14.2857142857%;height:25px}"]});class h{}function O(a,t){if(1&a){const o=e.EpF();e.TgZ(0,"app-data-table-cell",4),e.NdJ("cellChanged",function(n){const b=e.CHM(o).$implicit,J=e.oxw();return e.KtG(J.cellChanged(b,n))}),e.qZA()}if(2&a){const o=t.$implicit,r=e.oxw();e.Q6J("value",r.row[o.key])("contenteditable",!0)}}h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-data-table-menu"]],decls:3,vars:0,consts:[[1,"material-icons","material-symbols-outlined"]],template:function(t,o){1&t&&(e.TgZ(0,"div")(1,"span",0),e._uU(2," more_vert "),e.qZA()())},encapsulation:2});class m{constructor(){this.cells=[],this.row={},this.canDelete=!1,this.canDownload=!1,this.updataRow=new e.vpe,this.patchRow=new e.vpe,this.deleteRow=new e.vpe,this.downloadRow=new e.vpe}sellChangesValue(t,o,r){const n=this.row;n[o]=r,console.log(n),console.log({id:t.id,[o]:r})}cellChanged(t,o){const r=this.row;console.log(r),r[t.name]=o,this.updataRow.emit(r),console.log(r)}}function B(a,t){if(1&a&&e._UZ(0,"app-data-table-row",2),2&a){const o=t.$implicit,r=e.oxw();e.Q6J("row",o)("canDelete",!0)("cells",r.cells)}}m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-data-table-row"]],inputs:{cells:"cells",row:"row",canDelete:"canDelete",canDownload:"canDownload"},outputs:{updataRow:"updataRow",patchRow:"patchRow",deleteRow:"deleteRow",downloadRow:"downloadRow"},decls:4,vars:1,consts:[[1,"DataTable__row"],[1,"cells"],["class","cell",3,"value","contenteditable","cellChanged",4,"ngFor","ngForOf"],[1,"header__menu"],[1,"cell",3,"value","contenteditable","cellChanged"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,O,1,2,"app-data-table-cell",2),e.qZA(),e._UZ(3,"app-data-table-menu",3),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",o.cells))},dependencies:[c.sg,h,u],styles:[".DataTable__row[_ngcontent-%COMP%]{display:flex;width:100%}.cells[_ngcontent-%COMP%]{display:flex;width:calc(100% - 20px)}.cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;margin-left:10px;margin-right:10px;width:14.2857142857%;height:30px;white-space:nowrap;overflow-x:scroll}.cell[_ngcontent-%COMP%]::-webkit-scrollbar{height:0}.header__menu[_ngcontent-%COMP%]{width:30px}"]});class P{constructor(t,o){this.productsPageService=t,this.route=o,this.products=[],this.cells=[{key:"id"},{key:"company"},{key:"title"},{key:"category"},{key:"rating"},{key:"price"},{key:"image"}]}ngOnInit(){this.data&&(this.productsPageService.canApp&&(this.productsPageService.products=this.productsPageService.products.concat(this.productsPageService.roundPrice(this.data)),this.productsPageService.canApp=!1,console.log(this.productsPageService.products)),this.route.queryParams.subscribe(t=>{(""!=this.productsPageService.orderBy||this.productsPageService.orderBy!=t.orderBy)&&(this.productsPageService.orderBy=t.orderBy,this.productsPageService.sortProducts(this.productsPageService.orderBy)),this.products=this.productsPageService.getProductsPage()}))}}function D(a,t){if(1&a&&(e.TgZ(0,"option",2),e._uU(1),e.qZA()),2&a){const o=t.$implicit;e.Q6J("selected",o.name)("value",o.name),e.xp6(1),e.Oqu(o.value)}}P.\u0275fac=function(t){return new(t||P)(e.Y36(i),e.Y36(y.gz))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-products-more"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"row"],["class","row",3,"row","canDelete","cells",4,"ngFor","ngForOf"],[1,"row",3,"row","canDelete","cells"]],template:function(t,o){1&t&&(e._UZ(0,"app-data-table-header",0),e.YNc(1,B,1,3,"app-data-table-row",1)),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.products))},dependencies:[c.sg,g,m],styles:[".row[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid black}"]});class _{constructor(){this.selected="",this.options=[],this.queryParams=new e.vpe}changeOrderBy(t){this.queryParams.emit(t)}}_.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-select-brand"]],inputs:{selected:"selected",options:"options"},outputs:{queryParams:"queryParams"},decls:2,vars:2,consts:[[3,"ngModel","ngModelChange","change"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"]],template:function(t,o){1&t&&(e.TgZ(0,"select",0),e.NdJ("ngModelChange",function(n){return o.selected=n})("change",function(){return o.changeOrderBy(o.selected)}),e.YNc(1,D,2,3,"option",1),e.qZA()),2&t&&(e.Q6J("ngModel",o.selected),e.xp6(1),e.Q6J("ngForOf",o.options))},dependencies:[c.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On],encapsulation:2});class v{}function A(a,t){if(1&a){const o=e.EpF();e.ynx(0),e._UZ(1,"app-products-more",7),e.TgZ(2,"footer",8)(3,"div")(4,"app-button",9),e.NdJ("click",function(){const C=e.CHM(o).ngIf,b=e.oxw();return e.KtG(b.addMore(C.meta.totalPages))}),e.qZA(),e.TgZ(5,"app-button",10),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.changePage("-"))}),e.qZA(),e.TgZ(6,"app-button",11),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.changePage("+"))}),e.qZA()(),e.TgZ(7,"div"),e._uU(8,"C\u0442\u0440\u0430\u043d\u0438\u0446\u0430: "),e.TgZ(9,"b"),e._uU(10),e.qZA(),e._uU(11," \u0438\u0437 "),e.TgZ(12,"i"),e._uU(13),e.qZA(),e._uU(14," . \u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432: "),e.TgZ(15,"b"),e._uU(16),e.qZA(),e._uU(17," \u0438\u0437 "),e.TgZ(18,"i"),e._uU(19),e.qZA()()(),e.BQk()}if(2&a){const o=t.ngIf,r=e.oxw();e.xp6(1),e.Q6J("data",o.items),e.xp6(3),e.Q6J("isDisabled",r.isDisabled),e.xp6(6),e.Oqu(r.getPageNumber()),e.xp6(3),e.Oqu(r.getPagesTotal()),e.xp6(3),e.Oqu(r.getItemCount()),e.xp6(3),e.Oqu(r.totalItems(o.meta.totalItems))}}v.\u0275fac=function(t){return new(t||v)},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-order-by"]],decls:3,vars:0,consts:[[1,"sort__container"],[1,"sort"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c: "),e.qZA()())},styles:[".sort__container[_ngcontent-%COMP%]{display:flex}.sort[_ngcontent-%COMP%]{margin-right:20px;font-size:14px}.sort-active[_ngcontent-%COMP%]{cursor:pointer}"]});class f{getItemCount(){return this.productsPageService.products.length}changePage(t){"-"===t?(this.productsPageService.page=this.productsPageService.page-1>0?this.productsPageService.page-1:1,this.queryPage()):"+"===t&&(this.productsPageService.page=this.productsPageService.page+1<this.productsPageService.pages?this.productsPageService.page+1:this.productsPageService.pages,this.queryPage())}queryPage(){this.routerSetParams({page:this.productsPageService.page.toString()})}getPageNumber(){return this.productsPageService.page}getPagesTotal(){return this.productsPageService.pages=Math.ceil(this.getItemCount()/this.productsPageService.countProduct)}totalItems(t){return this.productsPageService.totalItems=t}setParamPage(){this.routerSetParams({page:this.productsPageService.page.toString()})}applyQuery(t){this.routerSetParams(t),this.productsPageService.orderBy=t.orderBy}addMore(t){this.productsPageService.canApp=!0,this.productsPageService.pages=this.productsPageService.pages+1<=t?this.productsPageService.pages+1:t,this.isDisabled=this.productsPageService.pages>=t;const o={page:this.productsPageService.pages.toString()};this.getProducts(o),this.setParamPage(),this.routerSetParams(o),""!=this.productsPageService.orderBy&&this.productsPageService.sortProducts(this.productsPageService.orderBy)}getProducts(t){this.data$=this.productsPageService.getProducts$({page:t.page})}routerSetParams(t){this.router.navigate([],{relativeTo:this.route,queryParams:t,queryParamsHandling:"merge"})}constructor(t,o,r){this.router=t,this.route=o,this.productsPageService=r,this.options=this.productsPageService.options,this.selected="id",this.isDisabled=!1,this.title="",this.title=this.route.snapshot.data.title}ngOnInit(){this.route.queryParams.subscribe(t=>{this.productsPageService.canApp?((!this.getItemCount()||!t.page)&&(this.routerSetParams({page:"1"}),""!=this.productsPageService.orderBy&&(this.selected=this.productsPageService.orderBy)),this.productsPageService.page=Number(t.page),t.orderBy&&(this.selected=t.orderBy),this.getProducts(t)):t.page||(this.routerSetParams({page:`${this.productsPageService.page}`}),this.getProducts(t))})}}f.\u0275fac=function(t){return new(t||f)(e.Y36(y.F0),e.Y36(y.gz),e.Y36(i))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-products-page-more"]],decls:10,vars:6,consts:[[1,"page"],[1,"container"],[1,"products__actions"],[1,"products__filters"],[1,"actions__item",3,"orderBy"],[1,"actions__item",3,"options","selected","queryParams","orderBy"],[4,"ngIf"],[3,"data"],[1,"footer"],["text","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451",3,"isDisabled","click"],["text","\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f",3,"click"],["text","\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"h3"),e._uU(1),e.qZA(),e.TgZ(2,"section",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"app-order-by",4),e.NdJ("orderBy",function(){return null}),e.qZA(),e.TgZ(7,"app-select-brand",5),e.NdJ("queryParams",function(n){return o.applyQuery({orderBy:n})})("orderBy",function(){return null}),e.qZA()()(),e.YNc(8,A,20,6,"ng-container",6),e.ALo(9,"async"),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(o.title),e.xp6(6),e.Q6J("options",o.options)("selected",o.selected),e.xp6(1),e.Q6J("ngIf",e.lcZ(9,4,o.data$)))},dependencies:[c.O5,Z.r,P,_,v,c.Ov],styles:[".page[_ngcontent-%COMP%]{padding-top:10px}.products__actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.products__filters[_ngcontent-%COMP%]{display:flex}.actions__item[_ngcontent-%COMP%]{display:flex;align-items:center}.actions__item[_ngcontent-%COMP%]:not(:last-child){margin-right:30px}.footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-top:10px}"]});var F=s(5529);class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[c.ez,F.p,S.h,l.u5]});const q=[{path:"",component:f,data:{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}}];class d{}d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[c.ez,S.h,y.Bz.forChild(q),l.u5,p]})}}]);